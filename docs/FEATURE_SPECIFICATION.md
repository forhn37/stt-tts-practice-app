# SoundLab 기능 추가 명세서

> 세미나 문서 분석 기반 기능 확장 계획

## 개요

세미나는 총 3시간(이론 2시간 + 실습 1시간)으로 구성됩니다. 현재 SoundLab 앱은 기본 기능만 구현되어 있어 실습 시간이 부족할 수 있습니다. 아래 기능들을 추가하여 세미나 참가자들이 이론에서 배운 내용을 직접 체험할 수 있도록 합니다.

---

## Chapter 1 연계 기능: Wave Lab 확장

### 1.1 샘플링 레이트 비교 데모

**세미나 내용 연계**: 나이퀴스트 정리, 샘플링 레이트별 품질 차이

```
┌─────────────────────────────────────────────────────────────┐
│  📊 샘플링 레이트 비교                                        │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  원본 (44.1kHz)    8kHz (전화)    16kHz (STT)    22kHz      │
│  ┌──────────┐     ┌──────────┐   ┌──────────┐   ┌──────────┐│
│  │ ∿∿∿∿∿∿∿∿ │     │ ∿ ∿ ∿ ∿  │   │ ∿∿ ∿∿ ∿∿ │   │ ∿∿∿∿∿∿∿  ││
│  └──────────┘     └──────────┘   └──────────┘   └──────────┘│
│     [재생]           [재생]         [재생]         [재생]    │
│                                                             │
│  💡 낮은 샘플링 → 고주파 손실 → 뭉개지는 소리                 │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**구현 내용**:
- 녹음된 오디오를 다양한 샘플링 레이트로 다운샘플링
- 각 샘플링 레이트별 파형 시각화
- 재생 버튼으로 품질 차이 직접 청취
- 나이퀴스트 한계 주파수 표시

**교육 효과**:
- 왜 STT에서 16kHz를 사용하는지 이해
- CD 음질(44.1kHz)의 의미 체감

---

### 1.2 Mel-Spectrogram 시각화

**세미나 내용 연계**: Chapter 1.4-1.5 스펙트로그램, Mel Scale

```
┌─────────────────────────────────────────────────────────────┐
│  📊 Mel-Spectrogram 시각화                                   │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  [일반 Spectrogram]        [Mel-Spectrogram]                │
│  ┌─────────────────┐       ┌─────────────────┐              │
│  │ 8kHz ░░░░░░░░░░ │       │ Mel  ░░░░░░░░░░ │              │
│  │      ░░▓▓░░▓▓░░ │       │  80  ░▓▓▓▓▓▓▓░░ │              │
│  │      ▓▓▓▓▓▓▓▓▓▓ │       │  40  ▓▓▓▓▓▓▓▓▓▓ │              │
│  │ 0Hz  ▓▓▓▓▓▓▓▓▓▓ │       │   0  ▓▓▓▓▓▓▓▓▓▓ │              │
│  └─────────────────┘       └─────────────────┘              │
│       선형 주파수                멜 스케일                   │
│                                                             │
│  [녹음 시작]  [ ] 실시간 업데이트                            │
│                                                             │
│  💡 Mel Scale은 저주파에 더 많은 해상도를 할당               │
│     → 인간 청각 특성 반영                                   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**구현 내용**:
- 실시간 FFT 데이터를 Mel Filter Bank 적용
- 일반 스펙트로그램 vs Mel-Spectrogram 비교 표시
- 시간에 따른 스펙트로그램 스크롤 (히트맵 형태)
- 80개의 Mel bin 시각화

**교육 효과**:
- Mel Scale이 왜 AI에서 표준인지 이해
- 주파수 도메인 분석의 중요성 체감

---

## Chapter 2 연계 기능: STT Lab 확장

### 2.1 실시간 신뢰도(Confidence) 표시

**세미나 내용 연계**: CTC 확률, Beam Search

```
┌─────────────────────────────────────────────────────────────┐
│  📊 실시간 음성 인식 (신뢰도 표시)                            │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  인식 결과: "안녕하세요 오늘 날씨가 좋습니다"                  │
│                                                             │
│  단어별 신뢰도:                                              │
│  ┌─────────┬─────────┬─────────┬─────────┬─────────┐       │
│  │ 안녕    │ 하세요  │ 오늘    │ 날씨가  │ 좋습니다│       │
│  │ ████░░  │ ██████  │ █████░  │ ███░░░  │ ██████  │       │
│  │  95%    │  99%    │  92%    │  78%    │  98%    │       │
│  └─────────┴─────────┴─────────┴─────────┴─────────┘       │
│                               ↑                             │
│                          불확실! 🤔                         │
│                                                             │
│  💡 신뢰도가 낮은 부분은 오인식 가능성 높음                   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**구현 내용**:
- Web Speech API의 confidence 속성 활용
- 단어/음절별 신뢰도 색상 표시 (녹색-노란색-빨간색)
- 낮은 신뢰도 단어 하이라이트
- 대안 후보(alternatives) 표시

**교육 효과**:
- STT가 "추측"하는 과정 이해
- 왜 완벽하지 않은지 직관적으로 파악

---

### 2.2 Attention 히트맵 시각화 (정적 데모)

**세미나 내용 연계**: Chapter 2.3 Attention 메커니즘

```
┌─────────────────────────────────────────────────────────────┐
│  📊 Attention 히트맵 시뮬레이터                              │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  예시 문장 선택: [안녕하세요 ▼]                              │
│                                                             │
│              ← 입력 (음성 프레임) →                         │
│          [1] [2] [3] [4] [5] [6] [7] [8]                   │
│        ┌────────────────────────────────┐                  │
│   안   │ ■  ■  ░  ░  ░  ░  ░  ░         │                  │
│   녕   │ ░  ░  ■  ■  ░  ░  ░  ░         │                  │
│   하   │ ░  ░  ░  ░  ■  ░  ░  ░         │                  │
│   세   │ ░  ░  ░  ░  ░  ■  ░  ░         │                  │
│   요   │ ░  ░  ░  ░  ░  ░  ■  ■         │                  │
│        └────────────────────────────────┘                  │
│                                                             │
│  💡 대각선 패턴 = 음성과 텍스트가 순차적으로 대응            │
│                                                             │
│  [다른 예시 보기]  [설명 보기]                               │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**구현 내용**:
- 사전 계산된 Attention 행렬 데이터 사용
- 인터랙티브 히트맵 (마우스 오버 시 값 표시)
- 다양한 예시 문장 선택 가능
- 비정상 패턴(반복, 건너뜀) 예시도 포함

**교육 효과**:
- Attention 메커니즘의 직관적 이해
- 왜 대각선 패턴이 나타나는지 학습

---

## Chapter 3 연계 기능: TTS Lab 확장

### 3.1 Vocoder 비교 데모

**세미나 내용 연계**: Chapter 3.3 Neural Vocoder

```
┌─────────────────────────────────────────────────────────────┐
│  📊 Vocoder 품질 비교                                        │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  입력 텍스트: [안녕하세요, 반갑습니다]                        │
│                                                             │
│  ┌─────────────────────────────────────────────────────────┐│
│  │  Griffin-Lim (전통 방식)                                ││
│  │  [▶ 재생]  품질: ⭐⭐⭐☆☆  특징: 기계적, 금속성          ││
│  │  ∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿                                  ││
│  └─────────────────────────────────────────────────────────┘│
│                                                             │
│  ┌─────────────────────────────────────────────────────────┐│
│  │  HiFi-GAN (Neural Vocoder)                              ││
│  │  [▶ 재생]  품질: ⭐⭐⭐⭐⭐  특징: 자연스러움, 사람 같음   ││
│  │  ∿∿~∿∿~∿∿~∿∿~∿∿~∿∿~                                    ││
│  └─────────────────────────────────────────────────────────┘│
│                                                             │
│  💡 같은 Mel-Spectrogram도 Vocoder에 따라 품질 차이 큼       │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**구현 내용**:
- 사전 녹음된 샘플 오디오 사용 (저작권 자유)
- Griffin-Lim vs HiFi-GAN 등 여러 Vocoder 결과 비교
- 파형 시각화 + 재생 버튼
- 품질 평가 스코어 표시

**교육 효과**:
- Vocoder가 TTS 품질에 미치는 영향 체감
- 딥러닝 Vocoder의 혁신 이해

---

## Chapter 4 연계 기능: Playground 확장

### 4.1 노이즈 영향 시뮬레이터

**세미나 내용 연계**: Chapter 4.3 노이즈 대응

```
┌─────────────────────────────────────────────────────────────┐
│  📊 노이즈가 STT에 미치는 영향                               │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  [녹음 시작]  또는  샘플 음성: [회의실 대화 ▼]               │
│                                                             │
│  노이즈 유형 및 강도:                                        │
│  ┌─────────────────────────────────────────────────────────┐│
│  │  백색 소음 (에어컨)    ○───────●───────○  [중간]       ││
│  │  카페 배경음           ○───●───────────○  [약함]       ││
│  │  교통 소음             ○───────────●───○  [강함]       ││
│  └─────────────────────────────────────────────────────────┘│
│                                                             │
│  원본 인식 결과: "오늘 회의는 3시에 시작합니다"               │
│  노이즈 적용 후: "오늘 회의는 세 시에 시작됩니다" (WER: 25%)  │
│                                                             │
│  파형 비교:                                                  │
│  원본:     ∿∿∿~∿∿∿~∿∿∿~                                    │
│  노이즈+:  ≋≋≋~≋≋≋~≋≋≋~                                    │
│                                                             │
│  💡 노이즈가 심할수록 인식률 급격히 하락                      │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**구현 내용**:
- Web Audio API로 실시간 노이즈 합성
- 노이즈 유형: 백색소음, 핑크소음, 환경음
- 강도 조절 슬라이더
- 노이즈 적용 전/후 STT 결과 비교
- WER/CER 자동 계산

**교육 효과**:
- 노이즈가 STT에 미치는 실질적 영향 체험
- Data Augmentation의 필요성 이해

---

## 구현 우선순위

| 순위 | 기능 | 난이도 | 교육 효과 | 예상 시간 |
|------|------|--------|----------|----------|
| 1 | 샘플링 레이트 비교 | 중 | 높음 | Chapter 1 핵심 |
| 2 | Mel-Spectrogram | 상 | 높음 | AI 입력 이해 |
| 3 | 실시간 신뢰도 | 하 | 중 | STT 불확실성 |
| 4 | 노이즈 시뮬레이터 | 중 | 높음 | 실무 연관성 |
| 5 | Vocoder 비교 | 하 | 중 | 오디오 샘플만 |
| 6 | Attention 히트맵 | 중 | 중 | 정적 데모 |

---

## 기술 스택

- **오디오 처리**: Web Audio API (AudioContext, AnalyserNode)
- **시각화**: Canvas 2D API, CSS Grid
- **노이즈 생성**: Web Audio OscillatorNode, AudioBufferSourceNode
- **데이터**: 사전 준비된 JSON 파일 (Attention 행렬, Vocoder 샘플)

---

## 예상 세미나 활용 시나리오

### Wave Lab 실습 (20분)
1. 녹음 → 파형/FFT 확인 (5분)
2. 샘플링 레이트 변경 → 품질 비교 청취 (5분)
3. Mel-Spectrogram 관찰 → 모음별 패턴 차이 (10분)

### STT Lab 실습 (20분)
1. 음성 인식 → 신뢰도 확인 (5분)
2. CTC 디코딩 시뮬레이터 (5분)
3. Attention 히트맵 관찰 (5분)
4. 노이즈 환경 테스트 (5분)

### TTS Lab 실습 (15분)
1. 텍스트 입력 → 음성 합성 (5분)
2. G2P 변환기 체험 (5분)
3. Vocoder 비교 청취 (5분)

### Playground 실습 (5분)
1. WER/CER 계산기 체험

---

> 작성일: 2024-12-14
> 기반 문서: STT_TTS_세미나_컨텐츠_v2_이론중심.md, STT_TTS_세미나_발표스크립트_완전판.md
